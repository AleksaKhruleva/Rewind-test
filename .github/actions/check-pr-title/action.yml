name: Check PR Title
description: Validates the PR title format and extracts ISSUE_KEY.

inputs:
  pr_title:
    description: The title of the Pull Request.
    required: true

outputs:
  issue_key:
    description: Extracted ISSUE_KEY from the PR title.

runs:
  using: "composite"
  steps:
    - name: Validate PR Title Format
      shell: bash
      run: |
        echo "üìå Validating PR title: ${{ inputs.pr_title }}"

        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–æ—Ä–º–∞—Ç –∏ –∏–∑–≤–ª–µ–∫–∞–µ–º –∫–ª—é—á –∑–∞–¥–∞—á–∏
        if [[ "${{ inputs.pr_title }}" =~ ^(REWIND-[1-9][0-9]*): ]]; then
          ISSUE_KEY="${BASH_REMATCH[1]}"
          echo "üîë Extracted ISSUE_KEY: $ISSUE_KEY"
          
          # –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ ISSUE_KEY
          echo "issue_key=$ISSUE_KEY" >> $GITHUB_ENV  # –ò—Å–ø–æ–ª—å–∑—É–µ–º GITHUB_ENV –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –∑–Ω–∞—á–µ–Ω–∏—è
        else
          echo "‚ùå Invalid PR title format. Expected 'REWIND-{number}: description'"
          exit 1
        fi
