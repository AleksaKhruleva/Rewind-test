name: Check PR Title
description: Validates the PR title format and extracts ISSUE_KEY.

inputs:
  pr_title:
    description: The title of the Pull Request.
    required: true

outputs:
  issue_key:
    description: Extracted ISSUE_KEY from the PR title.

runs:
  using: "composite"
  steps:
    - name: Validate PR Title Format
      id: validate_title  # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º id –¥–ª—è —à–∞–≥–∞, —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –≤—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
      shell: bash
      run: |
        echo "üìå Validating PR title: ${{ inputs.pr_title }}"

        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–æ—Ä–º–∞—Ç –∏ –∏–∑–≤–ª–µ–∫–∞–µ–º –∫–ª—é—á –∑–∞–¥–∞—á–∏
        if [[ "${{ inputs.pr_title }}" =~ ^(REWIND-[1-9][0-9]*): ]]; then
          ISSUE_KEY="${BASH_REMATCH[1]}"
          echo "üîë Extracted ISSUE_KEY: $ISSUE_KEY"
          
          # –ó–∞–ø–∏—Å—ã–≤–∞–µ–º ISSUE_KEY –≤ —Ñ–∞–π–ª –æ–∫—Ä—É–∂–µ–Ω–∏—è
          echo "ISSUE_KEY=$ISSUE_KEY" >> $GITHUB_ENV
        else
          echo "‚ùå Invalid PR title format. Expected 'REWIND-{number}: description'"
          exit 1
        fi
